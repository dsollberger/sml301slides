{
  "hash": "ac035f54f38f29e2bf1ab65ca9303e0b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"5: Dimension Reduction\"\nauthor: \"Derek Sollberger\"\ndate: \"2025-09-17\"\nformat:\n  html:\n    toc: true\n---\n\n::: {.cell}\n\n:::\n\n\n\n# Session 5: Dimension Reduction\n\n## Learning objectives:\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n- Introduce dimension reduction\n- Explore PCA and LDA\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n:::\n\n::::\n\n\n# Principal Components\n\n## Correlation\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## Finding Vectors\n\n### PCA Vectors\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nStandard deviations (1, .., p=2):\n[1] 1.2860884 0.5881978\n\nRotation (n x k) = (2 x 2):\n                     PC1        PC2\nbill_length_mm 0.7071068  0.7071068\nbill_depth_mm  0.7071068 -0.7071068\n```\n\n\n:::\n:::\n\n\n\n### Center\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nbill_length_mm  bill_depth_mm \n      47.56807       14.99664 \n```\n\n\n:::\n:::\n\n\n\n### Scale\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nbill_length_mm  bill_depth_mm \n      3.106116       0.985998 \n```\n\n\n:::\n:::\n\n\n\n## New Basis\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## PCA Pairs Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npsych::pairs.panels(gentoo_pca$x)\n```\n\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## PCA Bi Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggbiplot::ggbiplot(gentoo_pca,\n                   obs.scale = 1,\n                   var.scale = 1,\n                   varname.color = \"blue\") +\n  labs(title = \"First two principal components\",\n       subtitle = \"correlation: r = 0\",\n       caption = \"SML 301\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-warning}\n## DCP1\n:::\n\n\n# Principal Component Dimensionality Reduction\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Correlations\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n## Finding Vectors\n\n### PCA Vectors\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nStandard deviations (1, .., p=4):\n[1] 1.6826865 0.8474021 0.5804124 0.3370418\n\nRotation (n x k) = (4 x 4):\n                         PC1         PC2        PC3        PC4\nbill_depth_mm     -0.4095117 -0.80825505  0.3999776  0.1379922\nbill_length_mm     0.4642354 -0.58111842 -0.6575242 -0.1202033\nflipper_length_mm  0.5656175 -0.01845604  0.2734688  0.7777860\nbody_mass_g        0.5448509 -0.09319082  0.5769703 -0.6012971\n```\n\n\n:::\n:::\n\n\n\n### Center\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n    bill_depth_mm    bill_length_mm flipper_length_mm       body_mass_g \n         17.11968          44.15663         201.95984        4282.53012 \n```\n\n\n:::\n:::\n\n\n\n### Scale\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n    bill_depth_mm    bill_length_mm flipper_length_mm       body_mass_g \n         1.955837          5.490509         14.596950        832.983745 \n```\n\n\n:::\n:::\n\n\n\n## PCA Pairs Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npsych::pairs.panels(penguin_pca$x)\n```\n\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n## PCA Bi Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggbiplot::ggbiplot(penguin_pca,\n                   ellipse = TRUE, ellipse.prob = 0.95,\n                   groups = train_data$species,\n                   obs.scale = 1,\n                   var.scale = 1,\n                   varname.color = \"blue\") +\n  labs(title = \"First two principal components\",\n       subtitle = \"captures 87.4 percent of the variance\",\n       caption = \"SML 301\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n\n# PCA Regression\n\n## Regression Task\n\n* response variable: `body_mass_g`\n* explanatory variables: `bill_depth_mm`, `bill_length_mm`, `flipper_length_mm`\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"MSE: 135639.950195904\"\n```\n\n\n:::\n:::\n\n\n## Dimensionality Reduction\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n## PCA Model\n\n$$\\hat{y} = \\beta_{0} + \\beta_{1}P_{1} + \\beta_{2}P_{2}$$\n\n* $P_{1}$: principal component 1\n* $P_{2}$: principal component 2\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"MSE: 256471.448353553\"\n```\n\n\n:::\n:::\n\n\n\n\n# Activity: Literature Results\n\nWe will look at the results paragraphs for some of the most influential papers in the history of machine learning:\n\n\n## AlexNet\n\n* ImageNet Classification with Deep Convolutional Neural Networks (2012)\n\n## GANs\n\n* General Adversarial Nets (2014), Goodfellow et al.\n\n## TensorFlow\n\n* TensorFlow: A system for large-scale machine learning (2016), Abadi et al.\n\n## Word2Vec\n\n* Efficient Estimation of Word Representations in Vector Space (2013), Mikolov, Chen, Corrado, and Dean\n\n::: {.callout-warning}\n## DCP2\n:::\n\n# PCA Classification\n\n## Task\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## Classifier\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n* PC1 captures variance of the *entire* data set\n\n## Along PC1\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n\n# Toward LDA\n\n## Covariance Revisited\n\n* Naive Bayes ignored covariance (assumed conditional independence)\n* discriminant analyses (generative approach): fit multivariate Gaussians\n* want: dimensionality reduction\n\n**Fisher's linear discriminant analysis** (FLDA) is a hybrid of discriminative and generative techniques, but limited to\n\n$$K \\leq C - 1 \\text{ dimensions}$$\n\n* $C$: number of classes in response variable\n* $D$: number of dimensions in projected space\n\n## FLDA Ideas\n\n* $S_{B}, S_{W}$: scatter matrices (estimate covariance)\n* $W$: projection matrix from $D$ to $K$ dimensions\n\nObjective: maximize\n\n$$J(W) = \\displaystyle\\frac{|W^{T}S_{B}W|}{|W^{T}S_{W}W|}$$\n\n* eigenvalue scenario instead of gradient descent\n\n\n# LDA\n\n> Linear Discriminant Analysis takes the group structure into account\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n\n## Projection\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n\n## Comparison\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_dimension_reduction_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-warning}\n## DCP3\n:::\n\n# Ethics Enclave\n\n::: {.callout-tip collapse=\"true\"}\n## Against Deepfakes\n\n\"There are three basic approaches for protecting ourselves against misinformation and disinformation\n\n* \"The first is technology.  Tech companies might be able to use machine learning to detect online misinformation and disinformation.\"\n* \"A second approach is governmental regulation.  Some countries have already passed laws against creating or spreading fake news ...\"\n* \"A third and most powerful approach is education.  If we do a good job of educating people in media literacy and critical thinking ...\"\n\nCarl T Bergstrom and Jevin D West\n\n:::\n\n\n\n\n\n\n# Quo Vadimus?\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n* due this Friday:\n\n    - Precept 3\n    - Pick Group Partners (survey)\n\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"50%\"}\n\nI met Josh Starmer!\n\n![Dr Josh Starmer](Josh_Starmer_Princeton.png)\n\nSeptember 16, 2025\n:::\n\n::::\n\n\n# Footnotes\n\n::: {.callout-note collapse=\"true\"}\n\n## (optional) Additional Resources and References\n\n* [PCA in R](https://www.r-bloggers.com/2021/05/principal-component-analysis-pca-in-r/) by finnstats\n* [PCR in R](https://www.r-bloggers.com/2016/07/performing-principal-components-regression-pcr-in-r/) by Michy Alice\n\n![sarcasm](python_rizz.png)\n\n* [image source](https://www.reddit.com/r/csMajors/comments/1h53a03/i_made_a_brainrot_version_of_python/)\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.5.1 (2025-06-13 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n  LAPACK version 3.12.1\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] lubridate_1.9.4      forcats_1.0.0        stringr_1.5.1       \n [4] readr_2.1.5          tidyverse_2.0.0      yardstick_1.3.2     \n [7] workflowsets_1.1.1   workflows_1.2.0      tune_1.3.0          \n[10] tidyr_1.3.1          tibble_3.3.0         rsample_1.3.1       \n[13] recipes_1.3.1        purrr_1.1.0          parsnip_1.3.2       \n[16] modeldata_1.5.0      infer_1.0.9          dplyr_1.1.4         \n[19] dials_1.4.1          scales_1.4.0         broom_1.0.9         \n[22] tidymodels_1.3.0     patchwork_1.3.1      palmerpenguins_0.1.1\n[25] ggtext_0.1.2         GGally_2.4.0         ggbiplot_0.6.2      \n[28] ggplot2_4.0.0       \n\nloaded via a namespace (and not attached):\n [1] mnormt_2.1.1        rlang_1.1.6         magrittr_2.0.3     \n [4] furrr_0.3.1         compiler_4.5.1      vctrs_0.6.5        \n [7] lhs_1.2.0           pkgconfig_2.0.3     fastmap_1.2.0      \n[10] backports_1.5.0     labeling_0.4.3      rmarkdown_2.29     \n[13] markdown_2.0        prodlim_2025.04.28  tzdb_0.5.0         \n[16] xfun_0.52           litedown_0.7        jsonlite_2.0.0     \n[19] psych_2.5.6         parallel_4.5.1      R6_2.6.1           \n[22] stringi_1.8.7       RColorBrewer_1.1-3  parallelly_1.45.1  \n[25] rpart_4.1.24        Rcpp_1.1.0          iterators_1.0.14   \n[28] knitr_1.50          future.apply_1.20.0 Matrix_1.7-3       \n[31] splines_4.5.1       nnet_7.3-20         timechange_0.3.0   \n[34] tidyselect_1.2.1    rstudioapi_0.17.1   yaml_2.3.10        \n[37] timeDate_4041.110   codetools_0.2-20    listenv_0.9.1      \n[40] lattice_0.22-7      withr_3.0.2         S7_0.2.0           \n[43] evaluate_1.0.4      future_1.67.0       survival_3.8-3     \n[46] ggstats_0.11.0      xml2_1.3.8          pillar_1.11.0      \n[49] foreach_1.5.2       generics_0.1.4      hms_1.1.3          \n[52] commonmark_2.0.0    globals_0.18.0      class_7.3-23       \n[55] glue_1.8.0          tools_4.5.1         data.table_1.17.8  \n[58] gower_1.0.2         grid_4.5.1          ipred_0.9-15       \n[61] nlme_3.1-168        cli_3.6.5           DiceDesign_1.10    \n[64] lava_1.8.1          gtable_0.3.6        pls_2.8-5          \n[67] GPfit_1.0-9         digest_0.6.37       htmlwidgets_1.6.4  \n[70] farver_2.1.2        htmltools_0.5.8.1   lifecycle_1.0.4    \n[73] hardhat_1.4.1       gridtext_0.1.5      MASS_7.3-65        \n```\n\n\n:::\n:::\n\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n::::: {.panel-tabset}\n\n\n\n:::::",
    "supporting": [
      "05_dimension_reduction_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}